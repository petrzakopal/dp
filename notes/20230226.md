# Poznatky 26.02.2023

- podařilo se mi optimalizovat kód v kernelu a hostu na to abych využil na RK4 (pouze RK4) FPGA `8 559 LUT` - screen je níže

![Number of LUTs for a basic kernel](./images/20230226/20230226_kernel_number_luts.png)

- pro zpracování 10 000 hodnot v FPGA na RK4 je třeba cca `10.0547 ms`, to vychází na `1 mikro sekundu` jedna hodnota, dát hodnoty do kernelu, spustit a ukončit kernel trvá `2.071 ms`

![Kernel runtime 10 k values](./images/20230226/20230226_kernel_runtime_10k_values.png)

- pro kernel zpracování jedné hodnoty - emulace vstupu z čidla pomocí vstupu klávesnice
- pro zpacování jedné hodnoty RK4 v kernelu je třeba `0.461 ms`, to je kvůli režii dat, využito `8 699 LUT`
- od začátku spouštění kernelu do jeho konce v host programu bylo naměřeno `1.594 ms`

- zjištění, které je napsáno v branch `soc-code` ohledně profilování kernelu - pokud se použije flag `--profile profile.cfg` (je lepší absolutní cesta, házelo mi to random chybu po chvíli, i když před tím to šlo i relativně - prostě IDE zabugované) kdy `profile.cfg` obsahuje informace profilování kernelu jako např.

```cfg
#zybo-pmod-gpio-app_system/Hardware/profile.cfg
[profile]
data=all:all:all
memory=all
stall=all:all
exec=all:all
aie=all
```

- když se to dává do upraveného kernelu vlastně, po tom co došlo k jeho změně - třeba jen smazání komentáře, no tak to hází chybu, že je využito moc LUTs, více než 17,6 K, ve `vitis_analyzer` je i však v tomto případě uvedená estimated nižší hodnota LUTs, než uvádí linker, je to prostě divné, musel jsem tento profilovací soubor vyřadit z příkazů pro `v++`
