# Poznatky 18.03.2023

# Problém s PINem na FAN

- všude, v [Xilinx Wiki](https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/1641152513/Kria+K26+SOM#Fan-Control), v návodech [hackster](https://www.hackster.io/whitney-knitter/add-peripheral-support-to-kria-kr260-vivado-2022-1-project-874960), v BSP starter kitu [https://www.xilinx.com/support/download/index.html/content/xilinx/en/downloadNav/embedded-design-tools.html](https://www.xilinx.com/support/download/index.html/content/xilinx/en/downloadNav/embedded-design-tools.html) je řečeno, že je pinout na FAN A12 fyzický port, na PL HDA20
- ale v schematiku ` XTP743 - Kria KR260 Starter Kit Carrier Card Schematics (v1.0)`, download [here](https://www.xilinx.com/member/forms/download/design-license.html?cid=bad0ada6-9a32-427e-a793-c68fed567427&filename=xtp743-kr260-schematic.zip) - main url here -> [https://www.xilinx.com/products/som/kria/kr260-robotics-starter-kit.html#resources](https://www.xilinx.com/products/som/kria/kr260-robotics-starter-kit.html#resources) je FAN pinnutej skutečně na HDA20, ale to je přivedené na C24... ukázka níže
  ![Schema 1](./images/20230318/20230318_KRIA_FAN_SCHEMA_1.png)
  ![Schema 2](./images/20230318/20230318_KRIA_FAN_SCHEMA_2.png)

- video, kde o tom mluvím [YouTube](https://youtu.be/5SWHivKPtBw)

## Ukázka constrains z BSP

```
# (C) Copyright 2020 - 2021 Xilinx, Inc.
# SPDX-License-Identifier: Apache-2.0

set_property BITSTREAM.GENERAL.COMPRESS TRUE [current_design]

#Fan Speed Enable
set_property PACKAGE_PIN A12 [get_ports {fan_en_b}]
set_property IOSTANDARD LVCMOS33 [get_ports {fan_en_b}]
set_property SLEW SLOW [get_ports {fan_en_b}]
set_property DRIVE 4 [get_ports {fan_en_b}]

```
