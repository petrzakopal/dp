# Poznatky 10.02.2023

## Dnešní todo list

- zkusit zda v kernelu bude možné jako argument funkce používat jinou funkci - resp. pointer na tu funkci - ukázka je ve zkoušecím souboru [main.cpp](/code/test-program/cmodel/main.cpp), aby bylo možné udělat pouze jednu funkci na numerické řešení diff. rovnic a tu používat na řešení všech
- zkusit, jak to bylo původně zamýšleno použít pointery z hosta na vytvoření třeba struktury a tu poté dávat do kernelu - ukázka v [20230208](./20230208.md)

```c++
// něco jako toto
    std::vector<int, aligned_allocator<int>> host_memory; // zde místo struktury je uveden vektor
    host_memory = {48, 99, 125, 150};
    OCL_CHECK(err, cl::Buffer buffer_mem(context, CL_MEM_USE_HOST_PTR, size_in_bytes,host_memory.data(),nullptr););
     OCL_CHECK(err, err = krnl_vector_add.setArg(narg++, buffer_mem));
     q.enqueueMigrateMemObjects({buffer_mem},0 /* 0 means from host*/);
```

inspirace z [xilinx](https://xilinx.github.io/Vitis_Accel_Examples/2019.2/html/data_transfer.html)

- přejmenovat kernely - v hostu, jméno souboru, jméno v kernelu v extern C
- podle toho, zda půjdou struktury a vektory nebo ne, tak začít řešit tvorbu dat a parametrů pro motor
- vyscreenovat a popsat postup buildění a následného transferování kernelu a hostu do SoC, popis představen v [20230208](./20230208.md)
- podívat se do dp.tex a přepsat část o tom, že nejde HW akcelerace a co to dělá, že to nevybuildí `BOOT.BIN`, jinak všechny potřebné soubory jo a kvůli tomu to nejde, jak dlouho trvá vybuildit kernel základní a poté složitější, jaké je vytížení serveru
- nakreslit ve figmě flow buildění a transferu do fpga hezky
- navíc: vyhledat, jak z hostu je možné třeba rozsvítit LED nebo dát signál na GPIO - pozor, zda nebude třeba předělat vivado projekt/petalinux, musel by se změnit soubour, ve kterém je definovaný i ethernet atd. zazálohovat si to a podívat se na to

- po splnění todo listu buďto pokračovat v bádání nebo si dát „volno“ a pracovat
